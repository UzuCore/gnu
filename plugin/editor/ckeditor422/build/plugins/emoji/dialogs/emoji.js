
CKEDITOR.dialog.add('emojiDialog', function(editor) {
    var emojiCategories = {
    "ğŸ˜€ ê°ì •": [
        "ğŸ˜€",
        "ğŸ˜ƒ",
        "ğŸ˜„",
        "ğŸ˜",
        "ğŸ˜†",
        "ğŸ˜…",
        "ğŸ¤£",
        "ğŸ˜‚",
        "ğŸ™‚",
        "ğŸ™ƒ",
        "ğŸ˜‰",
        "ğŸ˜Š",
        "ğŸ˜‡",
        "ğŸ¥°",
        "ğŸ˜",
        "ğŸ¤©",
        "ğŸ˜˜",
        "ğŸ˜—",
        "ğŸ˜š",
        "ğŸ˜™",
        "ğŸ˜‹",
        "ğŸ˜›",
        "ğŸ˜œ",
        "ğŸ¤ª",
        "ğŸ˜",
        "ğŸ¤‘",
        "ğŸ¤—",
        "ğŸ¤­",
        "ğŸ¤«",
        "ğŸ¤”",
        "ğŸ¤",
        "ğŸ¤¨",
        "ğŸ˜",
        "ğŸ˜‘",
        "ğŸ˜¶",
        "ğŸ˜",
        "ğŸ˜’",
        "ğŸ™„",
        "ğŸ˜¬",
        "ğŸ˜Œ",
        "ğŸ˜”",
        "ğŸ˜ª",
        "ğŸ¤¤",
        "ğŸ˜´",
        "ğŸ˜·",
        "ğŸ¤’",
        "ğŸ¤•",
        "ğŸ¤¢",
        "ğŸ¤®",
        "ğŸ¤§",
        "ğŸ¥µ",
        "ğŸ¥¶",
        "ğŸ¥´",
        "ğŸ˜µ",
        "ğŸ¤¯",
        "ğŸ¤ ",
        "ğŸ¥³",
        "ğŸ˜",
        "ğŸ¤“",
        "ğŸ§",
        "ğŸ˜•",
        "ğŸ˜Ÿ",
        "ğŸ™",
        "â˜¹ï¸",
        "ğŸ˜®",
        "ğŸ˜¯",
        "ğŸ˜²",
        "ğŸ˜³",
        "ğŸ¥º",
        "ğŸ˜¦",
        "ğŸ˜§",
        "ğŸ˜¨",
        "ğŸ˜°",
        "ğŸ˜¥",
        "ğŸ˜¢",
        "ğŸ˜­",
        "ğŸ˜±",
        "ğŸ˜–",
        "ğŸ˜£",
        "ğŸ˜",
        "ğŸ˜“",
        "ğŸ˜©",
        "ğŸ˜«",
        "ğŸ¥±",
        "ğŸ˜¤",
        "ğŸ˜¡",
        "ğŸ˜ ",
        "ğŸ¤¬",
        "ğŸ˜ˆ",
        "ğŸ‘¿",
        "ğŸ’€",
        "â˜ ï¸",
        "ğŸ‘»",
        "ğŸ‘½",
        "ğŸ‘¾",
        "ğŸ¤–"
    ],
    "ğŸ§ ì‚¬ëŒ": [
        "ğŸ‘¶",
        "ğŸ§’",
        "ğŸ‘¦",
        "ğŸ‘§",
        "ğŸ§‘",
        "ğŸ‘¨",
        "ğŸ‘©",
        "ğŸ§”",
        "ğŸ‘±â€â™‚ï¸",
        "ğŸ‘±â€â™€ï¸",
        "ğŸ‘´",
        "ğŸ‘µ",
        "ğŸ™â€â™‚ï¸",
        "ğŸ™â€â™€ï¸",
        "ğŸ™â€â™‚ï¸",
        "ğŸ™â€â™€ï¸",
        "ğŸ™…â€â™‚ï¸",
        "ğŸ™…â€â™€ï¸",
        "ğŸ™†â€â™‚ï¸",
        "ğŸ™†â€â™€ï¸",
        "ğŸ’â€â™‚ï¸",
        "ğŸ’â€â™€ï¸",
        "ğŸ™‹â€â™‚ï¸",
        "ğŸ™‹â€â™€ï¸",
        "ğŸ™‡â€â™‚ï¸",
        "ğŸ™‡â€â™€ï¸",
        "ğŸ¤¦â€â™‚ï¸",
        "ğŸ¤¦â€â™€ï¸",
        "ğŸ¤·â€â™‚ï¸",
        "ğŸ¤·â€â™€ï¸",
        "ğŸ§‘â€âš•ï¸",
        "ğŸ§‘â€ğŸ“",
        "ğŸ§‘â€ğŸ«",
        "ğŸ§‘â€âš–ï¸",
        "ğŸ§‘â€ğŸŒ¾",
        "ğŸ§‘â€ğŸ³",
        "ğŸ§‘â€ğŸ”§",
        "ğŸ§‘â€ğŸ­",
        "ğŸ§‘â€ğŸ’¼",
        "ğŸ§‘â€ğŸ”¬",
        "ğŸ§‘â€ğŸ’»",
        "ğŸ§‘â€ğŸ¤",
        "ğŸ§‘â€ğŸ¨",
        "ğŸ§‘â€âœˆï¸",
        "ğŸ§‘â€ğŸš€",
        "ğŸ§‘â€ğŸš’"
    ],
    "ğŸ¶ ë™ë¬¼/ìì—°": [
        "ğŸ¶",
        "ğŸ±",
        "ğŸ­",
        "ğŸ¹",
        "ğŸ°",
        "ğŸ¦Š",
        "ğŸ»",
        "ğŸ¼",
        "ğŸ»â€â„ï¸",
        "ğŸ¨",
        "ğŸ¯",
        "ğŸ¦",
        "ğŸ®",
        "ğŸ·",
        "ğŸ½",
        "ğŸ¸",
        "ğŸµ",
        "ğŸ™ˆ",
        "ğŸ™‰",
        "ğŸ™Š",
        "ğŸ’",
        "ğŸ”",
        "ğŸ§",
        "ğŸ¦",
        "ğŸ¤",
        "ğŸ£",
        "ğŸ¥",
        "ğŸ¦†",
        "ğŸ¦…",
        "ğŸ¦‰",
        "ğŸ¦‡",
        "ğŸº",
        "ğŸ—",
        "ğŸ´",
        "ğŸ¦„",
        "ğŸ",
        "ğŸª±",
        "ğŸ›",
        "ğŸ¦‹",
        "ğŸŒ",
        "ğŸ",
        "ğŸœ",
        "ğŸª°",
        "ğŸª²",
        "ğŸª³",
        "ğŸ•·ï¸",
        "ğŸ•¸ï¸",
        "ğŸ¦‚",
        "ğŸ¢",
        "ğŸ",
        "ğŸ¦",
        "ğŸ¦–",
        "ğŸ¦•",
        "ğŸ™",
        "ğŸ¦‘",
        "ğŸ¦",
        "ğŸ¦",
        "ğŸ¦€",
        "ğŸ¡",
        "ğŸ ",
        "ğŸŸ",
        "ğŸ¬",
        "ğŸ³",
        "ğŸ‹",
        "ğŸ¦ˆ",
        "ğŸª¸",
        "ğŸŠ",
        "ğŸ…",
        "ğŸ†",
        "ğŸ¦“",
        "ğŸ¦",
        "ğŸ¦§",
        "ğŸ¦£",
        "ğŸ˜",
        "ğŸ¦›",
        "ğŸ¦",
        "ğŸª",
        "ğŸ«",
        "ğŸ¦’",
        "ğŸ¦˜",
        "ğŸƒ",
        "ğŸ‚",
        "ğŸ„",
        "ğŸ",
        "ğŸ–",
        "ğŸ",
        "ğŸ‘",
        "ğŸ¦™",
        "ğŸ",
        "ğŸ¦Œ",
        "ğŸ•",
        "ğŸ©",
        "ğŸ¦®",
        "ğŸ•â€ğŸ¦º",
        "ğŸˆ",
        "ğŸˆâ€â¬›",
        "ğŸª¶",
        "ğŸ“",
        "ğŸ¦ƒ",
        "ğŸ¦¤",
        "ğŸ¦š",
        "ğŸ¦œ",
        "ğŸ¦¢",
        "ğŸ•Šï¸",
        "ğŸ‡",
        "ğŸ¦",
        "ğŸ¦¨",
        "ğŸ¦¡",
        "ğŸ¦«",
        "ğŸ¦¦",
        "ğŸ¦¥",
        "ğŸ",
        "ğŸ€",
        "ğŸ¿ï¸",
        "ğŸ¦”",
        "ğŸ¾",
        "ğŸª²"
    ],
    "ğŸ• ìŒì‹": [
        "ğŸ‡",
        "ğŸˆ",
        "ğŸ‰",
        "ğŸŠ",
        "ğŸ‹",
        "ğŸŒ",
        "ğŸ",
        "ğŸ¥­",
        "ğŸ",
        "ğŸ",
        "ğŸ",
        "ğŸ‘",
        "ğŸ’",
        "ğŸ“",
        "ğŸ«",
        "ğŸ¥",
        "ğŸ¥¥",
        "ğŸ¥‘",
        "ğŸ…",
        "ğŸ†",
        "ğŸ¥’",
        "ğŸ¥¬",
        "ğŸ¥¦",
        "ğŸŒ½",
        "ğŸŒ¶ï¸",
        "ğŸ«‘",
        "ğŸ«’",
        "ğŸ¥•",
        "ğŸ«š",
        "ğŸ§„",
        "ğŸ§…",
        "ğŸ¥”",
        "ğŸ ",
        "ğŸ¥",
        "ğŸ¥¯",
        "ğŸ",
        "ğŸ¥–",
        "ğŸ¥¨",
        "ğŸ§€",
        "ğŸ¥š",
        "ğŸ³",
        "ğŸ§ˆ",
        "ğŸ¥",
        "ğŸ§‡",
        "ğŸ¥“",
        "ğŸ¥©",
        "ğŸ—",
        "ğŸ–",
        "ğŸ¦´",
        "ğŸŒ­",
        "ğŸ”",
        "ğŸŸ",
        "ğŸ•",
        "ğŸ¥ª",
        "ğŸ¥™",
        "ğŸ§†",
        "ğŸŒ®",
        "ğŸŒ¯",
        "ğŸ«”",
        "ğŸ¥—",
        "ğŸ¥˜",
        "ğŸ«•",
        "ğŸ",
        "ğŸœ",
        "ğŸ²",
        "ğŸ›",
        "ğŸ£",
        "ğŸ±",
        "ğŸ¥Ÿ",
        "ğŸ¦ª",
        "ğŸ¤",
        "ğŸ™",
        "ğŸš",
        "ğŸ˜",
        "ğŸ¥",
        "ğŸ¥ ",
        "ğŸ¥®",
        "ğŸ¢",
        "ğŸ¡",
        "ğŸ§",
        "ğŸ¨",
        "ğŸ¦",
        "ğŸ¥§",
        "ğŸ§",
        "ğŸ°",
        "ğŸ‚",
        "ğŸ®",
        "ğŸ­",
        "ğŸ¬",
        "ğŸ«",
        "ğŸ¿",
        "ğŸ§‹",
        "ğŸ©",
        "ğŸª",
        "ğŸ¥¤",
        "ğŸ§ƒ",
        "ğŸ¥›",
        "ğŸ¼",
        "â˜•",
        "ğŸµ",
        "ğŸ«–",
        "ğŸ¶",
        "ğŸº",
        "ğŸ»",
        "ğŸ¥‚",
        "ğŸ·",
        "ğŸ¥ƒ",
        "ğŸ«—",
        "ğŸ¸",
        "ğŸ¹",
        "ğŸ§‰",
        "ğŸ¾",
        "ğŸ§Š"
    ],
    "âœˆï¸ ì¥ì†Œ": [
        "â›±ï¸",
        "ğŸ–ï¸",
        "ğŸï¸",
        "ğŸœï¸",
        "ğŸ•ï¸",
        "ğŸï¸",
        "ğŸŒ‹",
        "ğŸ—»",
        "â›°ï¸",
        "ğŸ”ï¸",
        "ğŸŸï¸",
        "ğŸ›ï¸",
        "ğŸ—ï¸",
        "ğŸ˜ï¸",
        "ğŸšï¸",
        "ğŸ ",
        "ğŸ¡",
        "ğŸ¢",
        "ğŸ£",
        "ğŸ¤",
        "ğŸ¥",
        "ğŸ¦",
        "ğŸ¨",
        "ğŸ©",
        "ğŸª",
        "ğŸ«",
        "ğŸ¬",
        "ğŸ­",
        "ğŸ¯",
        "ğŸ°",
        "ğŸ’’",
        "ğŸ—¼",
        "ğŸ—½",
        "â›©ï¸",
        "ğŸ•Œ",
        "ğŸ›•",
        "ğŸ•",
        "â›ª",
        "ğŸ•‹",
        "â›²",
        "â›º",
        "ğŸŒ",
        "ğŸŒƒ",
        "ğŸ™ï¸",
        "ğŸŒ„",
        "ğŸŒ…",
        "ğŸŒ†",
        "ğŸŒ‡",
        "ğŸŒ‰"
    ],
    "âš½ í™œë™": [
        "âš½",
        "ğŸ€",
        "ğŸˆ",
        "âš¾",
        "ğŸ¥",
        "ğŸ",
        "ğŸ‰",
        "ğŸ¥",
        "ğŸ±",
        "ğŸª€",
        "ğŸ“",
        "ğŸ¸",
        "ğŸ’",
        "ğŸ‘",
        "ğŸ¥",
        "ğŸ",
        "ğŸªƒ",
        "ğŸ¥…",
        "â›³",
        "ğŸª",
        "ğŸ¹",
        "ğŸ£",
        "ğŸ¤¿",
        "ğŸ¥Š",
        "ğŸ¥‹",
        "ğŸ½",
        "ğŸ›¹",
        "ğŸ›·",
        "â›¸ï¸",
        "ğŸ¥Œ",
        "ğŸ›¼",
        "ğŸª„",
        "ğŸª„",
        "ğŸ¯",
        "ğŸ³",
        "ğŸ®",
        "ğŸ•¹ï¸",
        "ğŸ°",
        "ğŸ²",
        "ğŸ§©",
        "ğŸ§¸",
        "ğŸª†",
        "â™Ÿï¸",
        "ğŸ­",
        "ğŸ¨",
        "ğŸ§µ",
        "ğŸ§¶",
        "ğŸª¡",
        "ğŸª¢"
    ],
    "ğŸ’¡ ì‚¬ë¬¼": [
        "ğŸ’¡",
        "ğŸ”¦",
        "ğŸ•¯ï¸",
        "ğŸª”",
        "ğŸ§¯",
        "ğŸ›¢ï¸",
        "ğŸ’¸",
        "ğŸ’µ",
        "ğŸ’´",
        "ğŸ’¶",
        "ğŸ’·",
        "ğŸ’°",
        "ğŸ’³",
        "ğŸ§¾",
        "ğŸ’¼",
        "ğŸ§³",
        "ğŸ“",
        "ğŸ“‚",
        "ğŸ—‚ï¸",
        "ğŸ“…",
        "ğŸ“†",
        "ğŸ—’ï¸",
        "ğŸ—“ï¸",
        "ğŸ“‡",
        "ğŸ“ˆ",
        "ğŸ“‰",
        "ğŸ“Š",
        "ğŸ“‹",
        "ğŸ“Œ",
        "ğŸ“",
        "ğŸ“",
        "ğŸ–‡ï¸",
        "ğŸ“",
        "ğŸ“",
        "âœ‚ï¸",
        "ğŸ—ƒï¸",
        "ğŸ—„ï¸",
        "ğŸ—‘ï¸",
        "ğŸ”’",
        "ğŸ”“",
        "ğŸ”",
        "ğŸ”",
        "ğŸ”‘",
        "ğŸ—ï¸",
        "ğŸ”¨",
        "ğŸª“",
        "â›ï¸",
        "âš’ï¸",
        "ğŸ› ï¸",
        "ğŸ—¡ï¸",
        "âš”ï¸",
        "ğŸ’£",
        "ğŸªƒ",
        "ğŸ¹",
        "ğŸ›¡ï¸",
        "ğŸªš",
        "ğŸ”§",
        "ğŸª›",
        "ğŸ”©",
        "âš™ï¸",
        "ğŸ—œï¸",
        "âš–ï¸",
        "ğŸ¦¯",
        "ğŸ”—",
        "â›“ï¸",
        "ğŸª",
        "ğŸ§°",
        "ğŸ§²",
        "ğŸªœ",
        "âš—ï¸",
        "ğŸ§ª",
        "ğŸ§«",
        "ğŸ§¬",
        "ğŸ”¬",
        "ğŸ”­",
        "ğŸ“¡",
        "ğŸ’‰",
        "ğŸ©¸",
        "ğŸ’Š",
        "ğŸ©¹",
        "ğŸ©º",
        "ğŸšª",
        "ğŸª",
        "ğŸªŸ",
        "ğŸ›ï¸",
        "ğŸ›‹ï¸",
        "ğŸª‘",
        "ğŸš½",
        "ğŸš¿",
        "ğŸ›",
        "ğŸª ",
        "ğŸª¤",
        "ğŸª’",
        "ğŸ§´",
        "ğŸ§·",
        "ğŸ§¹",
        "ğŸ§º",
        "ğŸ§»",
        "ğŸª£",
        "ğŸ§¼",
        "ğŸª¥",
        "ğŸ§½",
        "ğŸ›’",
        "ğŸš¬",
        "âš°ï¸",
        "ğŸª¦",
        "âš±ï¸",
        "ğŸ§¿",
        "ğŸª¬"
    ],
    "ğŸ’¯ ê¸°í˜¸": [
        "â¤ï¸",
        "ğŸ§¡",
        "ğŸ’›",
        "ğŸ’š",
        "ğŸ’™",
        "ğŸ’œ",
        "ğŸ¤",
        "ğŸ–¤",
        "ğŸ¤",
        "ğŸ’”",
        "â£ï¸",
        "ğŸ’•",
        "ğŸ’",
        "ğŸ’“",
        "ğŸ’—",
        "ğŸ’–",
        "ğŸ’˜",
        "ğŸ’",
        "ğŸ’Ÿ",
        "â˜®ï¸",
        "âœï¸",
        "â˜ªï¸",
        "ğŸ•‰ï¸",
        "â˜¸ï¸",
        "âœ¡ï¸",
        "ğŸ”¯",
        "ğŸ•",
        "â˜¯ï¸",
        "â˜¦ï¸",
        "ğŸ›",
        "â›",
        "â™ˆ",
        "â™‰",
        "â™Š",
        "â™‹",
        "â™Œ",
        "â™",
        "â™",
        "â™",
        "â™",
        "â™‘",
        "â™’",
        "â™“",
        "ğŸ†”",
        "âš›ï¸",
        "ğŸ‰‘",
        "â˜¢ï¸",
        "â˜£ï¸",
        "ğŸ“´",
        "ğŸ“³",
        "ğŸˆ¶",
        "ğŸˆš",
        "ğŸˆ¸",
        "ğŸˆº",
        "ğŸˆ·ï¸",
        "âœ´ï¸",
        "ğŸ†š",
        "ğŸ’®",
        "ğŸ‰",
        "ãŠ™ï¸",
        "ãŠ—ï¸",
        "ğŸˆ´",
        "ğŸˆµ",
        "ğŸˆ¹",
        "ğŸˆ²",
        "ğŸ…°ï¸",
        "ğŸ…±ï¸",
        "ğŸ†",
        "ğŸ†‘",
        "ğŸ…¾ï¸",
        "ğŸ†˜",
        "âŒ",
        "â­•",
        "ğŸ›‘",
        "â›”",
        "ğŸ“›",
        "ğŸš«",
        "ğŸ’¯",
        "ğŸ’¢",
        "â™¨ï¸",
        "ğŸš·",
        "ğŸš¯",
        "ğŸš³",
        "ğŸš±",
        "ğŸ”",
        "ğŸ“µ",
        "ğŸš­",
        "â—",
        "â•",
        "â“",
        "â”",
        "â€¼ï¸",
        "â‰ï¸",
        "ğŸ”…",
        "ğŸ”†",
        "ã€½ï¸",
        "âš ï¸",
        "ğŸš¸",
        "ğŸ”±",
        "âšœï¸",
        "ğŸ”°",
        "â™»ï¸",
        "âœ…",
        "ğŸˆ¯",
        "ğŸ’¹",
        "â‡ï¸",
        "âœ³ï¸",
        "â",
        "ğŸŒ",
        "ğŸ’ ",
        "â“‚ï¸",
        "ğŸŒ€",
        "ğŸ’¤",
        "ğŸ§",
        "ğŸš¾",
        "â™¿",
        "ğŸ…¿ï¸",
        "ğŸ›—",
        "ğŸš®",
        "ğŸš°",
        "â™»ï¸",
        "ğŸš¹",
        "ğŸšº",
        "ğŸš»",
        "ğŸš¼",
        "âš ï¸"
    ],
    "ğŸ‡°ğŸ‡· êµ­ê¸°": [
        "ğŸ‡°ğŸ‡·",
        "ğŸ‡ºğŸ‡¸",
        "ğŸ‡¯ğŸ‡µ",
        "ğŸ‡¨ğŸ‡³",
        "ğŸ‡¬ğŸ‡§",
        "ğŸ‡«ğŸ‡·",
        "ğŸ‡©ğŸ‡ª",
        "ğŸ‡®ğŸ‡¹",
        "ğŸ‡ªğŸ‡¸",
        "ğŸ‡·ğŸ‡º",
        "ğŸ‡¸ğŸ‡¬",
        "ğŸ‡§ğŸ‡·",
        "ğŸ‡®ğŸ‡³",
        "ğŸ‡¨ğŸ‡¦",
        "ğŸ‡²ğŸ‡½",
        "ğŸ‡¹ğŸ‡­",
        "ğŸ‡»ğŸ‡³",
        "ğŸ‡²ğŸ‡¾",
        "ğŸ‡¸ğŸ‡¦",
        "ğŸ‡¦ğŸ‡ª"
    ]
};
    var recentKey = 'ckeditor_recent_emojis';

    function getRecentEmojis() {
        try {
            return JSON.parse(localStorage.getItem(recentKey)) || [];
        } catch (e) {
            return [];
        }
    }

    function saveRecentEmoji(emoji) {
        var list = getRecentEmojis();
        list = list.filter(e => e !== emoji);
        list.unshift(emoji);
        if (list.length > 20) list = list.slice(0, 20);
        localStorage.setItem(recentKey, JSON.stringify(list));
    }

    function renderEmojiGrid(category) {
        var emojis = emojiCategories[category];
        var html = '<div class="emoji-grid">';
        for (var i = 0; i < emojis.length; i++) {
            html += '<span class="emoji-item" data-emoji="' + emojis[i] + '">' + emojis[i] + '</span>';
        }
        html += '</div>';
        return html;
    }

    function renderRecent() {
        var emojis = getRecentEmojis().slice(0, 8);
        var html = '';
        for (var i = 0; i < emojis.length; i++) {
            html += '<span class="emoji-item" data-emoji="' + emojis[i] + '">' + emojis[i] + '</span>';
        }
        return html;
    }

    var html = `
    <div style="margin-bottom:10px;">
        <label>ì¹´í…Œê³ ë¦¬</label>
        <select id="emoji-category">
            <option value="ğŸ˜€ ê°ì •">ğŸ˜€ ê°ì •</option>
<option value="ğŸ§ ì‚¬ëŒ">ğŸ§ ì‚¬ëŒ</option>
<option value="ğŸ¶ ë™ë¬¼/ìì—°">ğŸ¶ ë™ë¬¼/ìì—°</option>
<option value="ğŸ• ìŒì‹">ğŸ• ìŒì‹</option>
<option value="âœˆï¸ ì¥ì†Œ">âœˆï¸ ì¥ì†Œ</option>
<option value="âš½ í™œë™">âš½ í™œë™</option>
<option value="ğŸ’¡ ì‚¬ë¬¼">ğŸ’¡ ì‚¬ë¬¼</option>
<option value="ğŸ’¯ ê¸°í˜¸">ğŸ’¯ ê¸°í˜¸</option>
<option value="ğŸ‡°ğŸ‡· êµ­ê¸°">ğŸ‡°ğŸ‡· êµ­ê¸°</option>
        </select>
    </div>
    <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <strong style="white-space:nowrap;">ğŸ•“ ìµœê·¼ ì‚¬ìš©</strong>
        <div id="recent-emoji" class="emoji-recent-inline"></div>
    </div>
    <div id="emoji-grid-container">
        <div class="emoji-grid"><span class="emoji-item" data-emoji="ğŸ˜€">ğŸ˜€</span><span class="emoji-item" data-emoji="ğŸ˜ƒ">ğŸ˜ƒ</span><span class="emoji-item" data-emoji="ğŸ˜„">ğŸ˜„</span><span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span><span class="emoji-item" data-emoji="ğŸ˜†">ğŸ˜†</span><span class="emoji-item" data-emoji="ğŸ˜…">ğŸ˜…</span><span class="emoji-item" data-emoji="ğŸ¤£">ğŸ¤£</span><span class="emoji-item" data-emoji="ğŸ˜‚">ğŸ˜‚</span><span class="emoji-item" data-emoji="ğŸ™‚">ğŸ™‚</span><span class="emoji-item" data-emoji="ğŸ™ƒ">ğŸ™ƒ</span><span class="emoji-item" data-emoji="ğŸ˜‰">ğŸ˜‰</span><span class="emoji-item" data-emoji="ğŸ˜Š">ğŸ˜Š</span><span class="emoji-item" data-emoji="ğŸ˜‡">ğŸ˜‡</span><span class="emoji-item" data-emoji="ğŸ¥°">ğŸ¥°</span><span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span><span class="emoji-item" data-emoji="ğŸ¤©">ğŸ¤©</span><span class="emoji-item" data-emoji="ğŸ˜˜">ğŸ˜˜</span><span class="emoji-item" data-emoji="ğŸ˜—">ğŸ˜—</span><span class="emoji-item" data-emoji="ğŸ˜š">ğŸ˜š</span><span class="emoji-item" data-emoji="ğŸ˜™">ğŸ˜™</span><span class="emoji-item" data-emoji="ğŸ˜‹">ğŸ˜‹</span><span class="emoji-item" data-emoji="ğŸ˜›">ğŸ˜›</span><span class="emoji-item" data-emoji="ğŸ˜œ">ğŸ˜œ</span><span class="emoji-item" data-emoji="ğŸ¤ª">ğŸ¤ª</span><span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span><span class="emoji-item" data-emoji="ğŸ¤‘">ğŸ¤‘</span><span class="emoji-item" data-emoji="ğŸ¤—">ğŸ¤—</span><span class="emoji-item" data-emoji="ğŸ¤­">ğŸ¤­</span><span class="emoji-item" data-emoji="ğŸ¤«">ğŸ¤«</span><span class="emoji-item" data-emoji="ğŸ¤”">ğŸ¤”</span><span class="emoji-item" data-emoji="ğŸ¤">ğŸ¤</span><span class="emoji-item" data-emoji="ğŸ¤¨">ğŸ¤¨</span><span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span><span class="emoji-item" data-emoji="ğŸ˜‘">ğŸ˜‘</span><span class="emoji-item" data-emoji="ğŸ˜¶">ğŸ˜¶</span><span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span><span class="emoji-item" data-emoji="ğŸ˜’">ğŸ˜’</span><span class="emoji-item" data-emoji="ğŸ™„">ğŸ™„</span><span class="emoji-item" data-emoji="ğŸ˜¬">ğŸ˜¬</span><span class="emoji-item" data-emoji="ğŸ˜Œ">ğŸ˜Œ</span><span class="emoji-item" data-emoji="ğŸ˜”">ğŸ˜”</span><span class="emoji-item" data-emoji="ğŸ˜ª">ğŸ˜ª</span><span class="emoji-item" data-emoji="ğŸ¤¤">ğŸ¤¤</span><span class="emoji-item" data-emoji="ğŸ˜´">ğŸ˜´</span><span class="emoji-item" data-emoji="ğŸ˜·">ğŸ˜·</span><span class="emoji-item" data-emoji="ğŸ¤’">ğŸ¤’</span><span class="emoji-item" data-emoji="ğŸ¤•">ğŸ¤•</span><span class="emoji-item" data-emoji="ğŸ¤¢">ğŸ¤¢</span><span class="emoji-item" data-emoji="ğŸ¤®">ğŸ¤®</span><span class="emoji-item" data-emoji="ğŸ¤§">ğŸ¤§</span><span class="emoji-item" data-emoji="ğŸ¥µ">ğŸ¥µ</span><span class="emoji-item" data-emoji="ğŸ¥¶">ğŸ¥¶</span><span class="emoji-item" data-emoji="ğŸ¥´">ğŸ¥´</span><span class="emoji-item" data-emoji="ğŸ˜µ">ğŸ˜µ</span><span class="emoji-item" data-emoji="ğŸ¤¯">ğŸ¤¯</span><span class="emoji-item" data-emoji="ğŸ¤ ">ğŸ¤ </span><span class="emoji-item" data-emoji="ğŸ¥³">ğŸ¥³</span><span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span><span class="emoji-item" data-emoji="ğŸ¤“">ğŸ¤“</span><span class="emoji-item" data-emoji="ğŸ§">ğŸ§</span><span class="emoji-item" data-emoji="ğŸ˜•">ğŸ˜•</span><span class="emoji-item" data-emoji="ğŸ˜Ÿ">ğŸ˜Ÿ</span><span class="emoji-item" data-emoji="ğŸ™">ğŸ™</span><span class="emoji-item" data-emoji="â˜¹ï¸">â˜¹ï¸</span><span class="emoji-item" data-emoji="ğŸ˜®">ğŸ˜®</span><span class="emoji-item" data-emoji="ğŸ˜¯">ğŸ˜¯</span><span class="emoji-item" data-emoji="ğŸ˜²">ğŸ˜²</span><span class="emoji-item" data-emoji="ğŸ˜³">ğŸ˜³</span><span class="emoji-item" data-emoji="ğŸ¥º">ğŸ¥º</span><span class="emoji-item" data-emoji="ğŸ˜¦">ğŸ˜¦</span><span class="emoji-item" data-emoji="ğŸ˜§">ğŸ˜§</span><span class="emoji-item" data-emoji="ğŸ˜¨">ğŸ˜¨</span><span class="emoji-item" data-emoji="ğŸ˜°">ğŸ˜°</span><span class="emoji-item" data-emoji="ğŸ˜¥">ğŸ˜¥</span><span class="emoji-item" data-emoji="ğŸ˜¢">ğŸ˜¢</span><span class="emoji-item" data-emoji="ğŸ˜­">ğŸ˜­</span><span class="emoji-item" data-emoji="ğŸ˜±">ğŸ˜±</span><span class="emoji-item" data-emoji="ğŸ˜–">ğŸ˜–</span><span class="emoji-item" data-emoji="ğŸ˜£">ğŸ˜£</span><span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span><span class="emoji-item" data-emoji="ğŸ˜“">ğŸ˜“</span><span class="emoji-item" data-emoji="ğŸ˜©">ğŸ˜©</span><span class="emoji-item" data-emoji="ğŸ˜«">ğŸ˜«</span><span class="emoji-item" data-emoji="ğŸ¥±">ğŸ¥±</span><span class="emoji-item" data-emoji="ğŸ˜¤">ğŸ˜¤</span><span class="emoji-item" data-emoji="ğŸ˜¡">ğŸ˜¡</span><span class="emoji-item" data-emoji="ğŸ˜ ">ğŸ˜ </span><span class="emoji-item" data-emoji="ğŸ¤¬">ğŸ¤¬</span><span class="emoji-item" data-emoji="ğŸ˜ˆ">ğŸ˜ˆ</span><span class="emoji-item" data-emoji="ğŸ‘¿">ğŸ‘¿</span><span class="emoji-item" data-emoji="ğŸ’€">ğŸ’€</span><span class="emoji-item" data-emoji="â˜ ï¸">â˜ ï¸</span><span class="emoji-item" data-emoji="ğŸ‘»">ğŸ‘»</span><span class="emoji-item" data-emoji="ğŸ‘½">ğŸ‘½</span><span class="emoji-item" data-emoji="ğŸ‘¾">ğŸ‘¾</span><span class="emoji-item" data-emoji="ğŸ¤–">ğŸ¤–</span></div>
    </div>
`;

    return {
        title: 'ì´ëª¨ì§€ ì„ íƒ',
        minWidth: 420,
        minHeight: 480,
        contents: [{
            id: 'emoji-tab',
            label: 'ì´ëª¨ì§€',
            elements: [{
                type: 'html',
                html: html
            }]
        }],
        onShow: function() {
            setTimeout(function() {
                document.getElementById('emoji-category').addEventListener('change', function() {
                    document.getElementById('emoji-grid-container').innerHTML = renderEmojiGrid(this.value);
                    bindClickEvents();
                });

                function bindClickEvents() {
                    var items = document.querySelectorAll('.emoji-item');
                    items.forEach(function(item) {
                        item.addEventListener('click', function() {
                            var emoji = this.getAttribute('data-emoji');
                            editor.insertHtml(emoji);
                            saveRecentEmoji(emoji);
                            var dlg = CKEDITOR.dialog.getCurrent();
                            if (dlg) dlg.hide();
                        });
                    });
                }

                // Refresh recent emojis
                document.querySelector('#recent-emoji').innerHTML = renderRecent();
                bindClickEvents();
            }, 50);
        }
    };
});
